{% extends "base.html" %}
{% block content %}
<h2>Teacher Dashboard</h2>
<div class="grid grid-2">
  <div class="card">
    <h3>Notifications</h3>
    <ul>
      {% for n in notifications %}
      <li>{{ n.created_at.strftime('%Y-%m-%d %H:%M') }} — {{ n.message }}</li>
      {% else %}
      <li>No notifications.</li>
      {% endfor %}
    </ul>
  </div>
  <div class="card">
    <h3>Upload Material</h3>
    <form action="/teacher/materials/upload" method="post" enctype="multipart/form-data">
      <label>Title</label>
      <input class="input" type="text" name="title" required>
      <label>Type</label>
      <select name="type">
        <option value="document">Document</option>
        <option value="video">Video</option>
        <option value="game">Game</option>
        <option value="quiz">Quiz</option>
      </select>
      <label>File</label>
      <input class="input" type="file" name="file" required>
      <div style="margin-top:10px"><button class="btn" type="submit">Upload</button></div>
    </form>
  </div>
</div>

<div class="card">
  <h3>All Assignments</h3>
  <table class="table">
    <thead><tr><th>ID</th><th>Student</th><th>Name</th><th>Uploaded</th><th>Status</th><th>Open</th></tr></thead>
    <tbody>
      {% for a in assignments %}
      <tr>
        <td>{{ a.id }}</td>
        <td>{{ a.student.email }}</td>
        <td>{{ a.original_name }}</td>
        <td>{{ a.uploaded_at.strftime('%Y-%m-%d %H:%M') }}</td>
        <td>{{ a.status }}</td>
        <td><a href="/teacher/assignment/{{ a.id }}">View</a></td>
      </tr>
      {% else %}
      <tr><td colspan="6">No assignments yet.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<div class="card">
  <h3>Your Materials</h3>
  <ul>
    {% for m in materials %}
    <li>{{ m.uploaded_at.strftime('%Y-%m-%d') }} — {{ m.title }} ({{ m.type }}) — <a href="/materials/{{ m.path }}" target="_blank">Open</a></li>
    {% else %}
    <li>No materials yet.</li>
    {% endfor %}
  </ul>
</div>
{% endblock %}
